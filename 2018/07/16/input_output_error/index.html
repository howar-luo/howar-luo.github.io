<html>
<head><meta name="generator" content="Hexo 3.9.0">
	
	<title>Linux shell标准输入/输出/错误重定向</title>
	<meta name="keywords" content="howar.cn">

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=3" rel="stylesheet" type="text/css">
    
        <script src="/js/util.js"></script>
        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3">
    
    

</head>

<body>


<h2 class="title">Linux shell标准输入/输出/错误重定向</h2>
<!---
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2018年7月16日


    <a class="article-category-link" href="/categories/Shell/">Shell</a>



 </div>
--->
</div>

<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-什么是文件描述符"><span class="toc-text">1. 什么是文件描述符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-文件重定向"><span class="toc-text">2. 文件重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-标准输出重定向"><span class="toc-text">2.1 标准输出重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-标准错误重定向"><span class="toc-text">2.2 标准错误重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-标准输入重定向"><span class="toc-text">2.3 标准输入重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-高级用法"><span class="toc-text">3. 高级用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-“-gt-dev-null-2-gt-amp-1”是啥意思"><span class="toc-text">3.1 “&gt;/dev/null 2&gt;&amp;1”是啥意思</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-“-gt-dev-null-2-gt-1”是啥意思"><span class="toc-text">3.2 “&gt;/dev/null 2&gt;1”是啥意思</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-“-gt-file-2-gt-file1”和“-gt-file-2-gt-amp-1”有啥区别"><span class="toc-text">3.3 “&gt;file 2&gt;file1”和“&gt;file 2&gt;&amp;1”有啥区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-“-gt-file-2-gt-amp-1”和“2-gt-amp-1-gt-file”有啥区别"><span class="toc-text">3.4 “&gt;file 2&gt;&amp;1”和“2&gt;&amp;1 &gt;file”有啥区别</span></a></li></ol></li></ol>
<h2 id="1-什么是文件描述符"><a href="#1-什么是文件描述符" class="headerlink" title="1. 什么是文件描述符"></a>1. 什么是文件描述符</h2><p>&emsp;&emsp;文件描述符即file descriptor，是内核为了高效管理已经被打开的文件所创建的索引。它是一个非负整数，用于指被打开的文件。所有执行I/O操作的系统调用都是通过文件描述符。</p>
<p>&emsp;&emsp;程序刚刚启动时，默认分配文件描述符0为标准输入、1为标准输出、2为标准错误。</p>
<h2 id="2-文件重定向"><a href="#2-文件重定向" class="headerlink" title="2. 文件重定向"></a>2. 文件重定向</h2><h3 id="2-1-标准输出重定向"><a href="#2-1-标准输出重定向" class="headerlink" title="2.1 标准输出重定向"></a>2.1 标准输出重定向</h3><p>&emsp;&emsp;标准输出重定向，使用符号“&gt;”,它表示程序输出至文件。该符号右侧文件若存在，则清空文件中的内容，并将新的内容输入至该文件；该符号右侧文件若存在，则首先创建该文件，并将新的内容输入至该文件。</p>
<p>&emsp;&emsp;而重定向符号“&gt;&gt;”则表示追加的意思。</p>
<p>&emsp;&emsp;值得注意的是，“&gt;file”其实是”1&gt;file”的效果。</p>
<h3 id="2-2-标准错误重定向"><a href="#2-2-标准错误重定向" class="headerlink" title="2.2 标准错误重定向"></a>2.2 标准错误重定向</h3><p>&emsp;&emsp;标准错误重定向跟标准输出重定向其实是类似的，只是重定向符号前面的文件描述符（2）不能省略，即：2&gt;file</p>
<h3 id="2-3-标准输入重定向"><a href="#2-3-标准输入重定向" class="headerlink" title="2.3 标准输入重定向"></a>2.3 标准输入重定向</h3><p>&emsp;&emsp;使用符号“&lt;”。举个简单的例子，就知道怎么用了。</p>
<p>&emsp;&emsp;假设当前路径下有两个文件：file1、file2。其中，file1中为空，file2中有内容：stdin test。</p>
<p>&emsp;&emsp;在shell下输入命令：cat &gt;file1，则shell会等待用户输入内容，该内容会输入file1中。但是如果在shell下输入命令：cat &gt;file1 &lt;file2,则shell将file2中的内容输入进file1中。</p>
<h2 id="3-高级用法"><a href="#3-高级用法" class="headerlink" title="3. 高级用法"></a>3. 高级用法</h2><h3 id="3-1-“-gt-dev-null-2-gt-amp-1”是啥意思"><a href="#3-1-“-gt-dev-null-2-gt-amp-1”是啥意思" class="headerlink" title="3.1 “&gt;/dev/null 2&gt;&amp;1”是啥意思"></a>3.1 “&gt;/dev/null 2&gt;&amp;1”是啥意思</h3><p>&emsp;&emsp;将标准输出重定向到设备/dev/null中，并且标准错误“像标准输出一样”重定向到/dev/null中。</p>
<h3 id="3-2-“-gt-dev-null-2-gt-1”是啥意思"><a href="#3-2-“-gt-dev-null-2-gt-1”是啥意思" class="headerlink" title="3.2 “&gt;/dev/null 2&gt;1”是啥意思"></a>3.2 “&gt;/dev/null 2&gt;1”是啥意思</h3><p>&emsp;&emsp;将标准输出重定向到设备/dev/null中，将标准错误重定向到文件名为1的文件中。</p>
<h3 id="3-3-“-gt-file-2-gt-file1”和“-gt-file-2-gt-amp-1”有啥区别"><a href="#3-3-“-gt-file-2-gt-file1”和“-gt-file-2-gt-amp-1”有啥区别" class="headerlink" title="3.3 “&gt;file 2&gt;file1”和“&gt;file 2&gt;&amp;1”有啥区别"></a>3.3 “&gt;file 2&gt;file1”和“&gt;file 2&gt;&amp;1”有啥区别</h3><p>&emsp;&emsp;前者会打开两次文件file，这样stdout和stderr会互相覆盖，这样相当于使用了FD1和FD2两个同时去抢占file的管道；</p>
<p>&emsp;&emsp;而后者中，stderr继承了FD1管道后，再被送往file，此时file只被打开一次，只使用了一个管道FD1，因此不存在覆盖的问题。</p>
<h3 id="3-4-“-gt-file-2-gt-amp-1”和“2-gt-amp-1-gt-file”有啥区别"><a href="#3-4-“-gt-file-2-gt-amp-1”和“2-gt-amp-1-gt-file”有啥区别" class="headerlink" title="3.4 “&gt;file 2&gt;&amp;1”和“2&gt;&amp;1 &gt;file”有啥区别"></a>3.4 “&gt;file 2&gt;&amp;1”和“2&gt;&amp;1 &gt;file”有啥区别</h3><p>&emsp;&emsp;如上分析，前一个命令表示：标准输入和标准错误通过同一个管道重定向到file中。</p>
<p>&emsp;&emsp;后一个命令无法达到这种效果，应该2&gt;&amp;1是标准错误拷贝了标准输出的行为，但此时标准输出还是在终端，&gt;file后才被重定向到file，所以其标准错误最终仍然保持在终端。</p>


<!--<a href="http://www.howar.cn/2018/07/16/input_output_error/#disqus_thread" class="article-comment-link">Comments</a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = ''; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->
<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=&web_id=" language="JavaScript"></script>script>
</div>






</body>
</html>